# Obsidian Git-AI Nexus 设计开发日志

本文档记录了 Obsidian Git-AI Nexus 应用从初期构思到多轮迭代的技术演进与设计决策。

---

## [v1.0.0] - 核心架构与多模态 AI 集成 (2024-05-01)
*   **基础搭建**: 确立了 React 18 + TypeScript + Tailwind CSS 的技术栈。
*   **AI 层**: 集成 Google Gemini SDK，实现多模态对话能力（支持文字、图片、文档）。
*   **GitHub 连接**: 实现基础的 PAT 验证及文件推送功能。
*   ** Obsidian 适配**: 针对侧边栏显示优化的响应式布局。

---

## [v1.7.0] - 文件夹深度扫描与原生资源管理器视图 (2024-05-20)
*   **项目上传**: 引入 `webkitdirectory` 支持，允许用户直接上传整个项目文件夹。
*   **Git 自动识别**: 通过解析 `.git/config` 文件，自动提取 `owner` 和 `repo` 信息，减少手动输入。
*   **列表视图重构**: 引入仿原生文件管理器的列表视图，支持“名称、修改日期、状态”等列。

---

## [v1.8.0] - 仓库路径解析优化 (2024-05-21)
### 改进内容
*   **正则增强**: 更新了 `.git/config` 的解析正则，支持 SSH (git@github.com) 和 HTTPS 两种格式，并能正确处理 `.git` 后缀。
*   **预验证机制**: 在添加文件夹前，调用 GitHub API 验证仓库是否存在，防止无效路径导致的同步失败。
*   **错误状态反馈**: 为文件夹卡片增加了具体的“错误 (Error)”状态，以红色视觉提示用户路径或权限有误。

---

## [v1.8.1] - 交互确认与编辑系统 (2024-05-22)
### 改进内容
*   **路径确认弹窗**: 增加“确认仓库信息”模态框。应用在解析 Git 配置后会展示结果，允许用户手动修正 `Owner` 或 `Repo` 名称，解决了因解析不准导致的 `404 Not Found` 问题。
*   **重置与刷新**: 允许用户对已添加的项目进行“重新上传”以刷新文件流，解决了 Web 端无法实时监听本地磁盘变化的限制。

---

## [v1.8.2] - 细粒度权限 (Fine-grained Token) 诊断与引导 (2024-05-23)
### 改进内容
*   **403 错误深度诊断**: 针对 `Resource not accessible by personal access token` 错误进行了特化处理。
*   **权限修复引导系统**:
    *   **视觉警告**: 当同步因权限被拒时，文件夹卡片会显示“权限受限”标签。
    *   **操作手册**: 增加了一个详细的权限修复模态框，分步骤指导用户如何设置 GitHub Token（区分 Classic 和 Fine-grained 两种 Token 的不同配置方法）。
    *   **链接直达**: 增加直达 GitHub Token 设置页面的外部链接。
*   **登录前置检查**: 在登录阶段，通过 `X-OAuth-Scopes` 响应头检测 Classic Token 是否具备 `repo` 作用域，并在缺失时提供警告。

---

## [v1.9.0] - 系统稳定性与用户体验微调 (当前版本)
### 核心改进
*   **静默同步记录**: `SyncLog` 现在会保留最近 30 条详细记录，方便用户回溯同步状态。
*   **持久化增强**: 优化了 `localStorage` 的存储逻辑，确保即便在 Obsidian 重载后，Token 和监控项目依然存在。
*   **视觉动效**: 增加了扫描时的 `RefreshCw` 旋转动画和弹窗进入的 `fade-in` 动效，提升应用原生感。

---
*记录人：Senior Frontend Engineer (AI Assistant)*
