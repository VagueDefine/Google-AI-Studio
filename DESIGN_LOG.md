# Obsidian Git-AI Nexus 设计开发日志

本文档旨在记录 Obsidian Git-AI Nexus 应用的迭代过程、核心设计决策及技术演进。

---

## [v1.0.0] - 初始架构与概念验证 (2024-05-20)

### 设计目标
构建一个能够嵌入 Obsidian 笔记软件的单页应用，实现 GitHub 仓库管理与 AI 对话的无缝集成。

### 核心功能
- **GitHub API 集成**: 实现基于个人访问令牌 (PAT) 的仓库及分支获取。
- **多模态对话**: 支持文字输入与文件上传（通过 Base64 编码传递给 Gemini）。
- **基础持久化**: 使用 `localStorage` 存储 GitHub 配置，确保 Obsidian 环境下的状态连续性。

### 视觉方案
- **基础框架**: React 18 + Tailwind CSS。
- **UI 设计**: 采用侧边栏抽屉式布局，适配 Obsidian 窄屏环境。
- **模型选择**: 初始使用 `gemini-3-flash-preview` 追求响应速度。

---

## [v1.1.0] - 用户体验优化与中文适配 (2024-05-20)

### 设计目标
针对中文用户群体优化交互界面，提升在 Obsidian 侧边栏模式下的操作效率。

### 设计变更
1.  **全面中文化**:
    *   将设置面板、提示信息、AI 系统指令 (System Instruction) 全部本地化。
    *   优化了“思考中”动画的文字描述。
2.  **UI/UX 细节打磨**:
    *   **附件预览卡片**: 重新设计了上传文件后的预览样式，增加了文件类型图标和删除动画。
    *   **设置面板优化**: 改进了 GitHub Token 的输入逻辑，增加“检查连接”状态反馈。
    *   **布局增强**: 针对极窄屏幕（Obsidian Sidebar）进行了排版优化，确保发送按钮不遮挡输入内容。
3.  **模型能力升级**:
    *   将核心推理模型切换至 `gemini-3-pro-preview`。
    *   **理由**: 考虑到用户通常需要进行复杂的代码分析或文档总结，Pro 模型在长文本理解和逻辑推理上更具优势。

### 技术改进
- **类型安全**: 修复了 `Array.from(FileList)` 的 TypeScript 类型定义问题。
- **Prompt Engineering**: 优化了系统提示词，明确了 AI 作为“Obsidian 插件助手”的角色定位，输出更符合 Markdown 规范。

---

## 未来展望
- [ ] **代码深度集成**: 直接从 GitHub 读取选定文件的内容发送给 AI。
- [ ] **Obsidian 交互增强**: 尝试支持将 AI 生成的内容直接保存回本地 Obsidian 库。
- [ ] **多会话管理**: 支持本地保存多个对话记录。

---
*记录人：Senior Frontend Engineer (AI Assistant)*